/*================================================================================================================================*/
/*=== IPM505/605 =================================================================================================================*/
/*================================================================================================================================*/
#include "globals.h"
#include "system.h"

/**********************************************************************************************************************************/
/*=== VARIABLES ==================================================================================================================*/
/**********************************************************************************************************************************/


/**********************************************************************************************************************************/
/*=== MAIN =======================================================================================================================*/
/**********************************************************************************************************************************/

int main(void){      
    SYSTEM_Initialize();                                                        // Initialize the device

    while(1){
        
        /*=== DDS ================================================================================================================*/        
        ddsService();                                                           // DDS service
        
        /*=== UART2 ==============================================================================================================*/
        uart2TxService();                                                       // UART2 TX service

        /*=== TIMED SERVICES =====================================================================================================*/
        if(sysServiceOn()){                                                     // Check if timed services should be serviced
            promService();                                                      // PROM service
            sysServiceOff();}                                                   // Disable timed services
                  
        /*=== HEARTBEAT ==========================================================================================================*/
        if(hBeatTgl()){hBeat_Toggle(); hBeatTglClr();}                          // Toggle external LED; Clear heartbeat toggle flag
    }//end while 
    return -1;
}//end main()